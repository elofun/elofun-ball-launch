{"version":3,"sources":["assets\\Scripts\\stage\\StageLobby.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport SoundMgr from \"../common/SoundMgr\";\r\nimport GameDefine from \"../game/GameDefine\";\r\nimport PeerManager from \"../PeerComponent/PeerManager\";\r\nimport QRCodeGen from \"../PeerComponent/QRCodeGen\";\r\nimport Stage from \"./Stage\";\r\nimport StageMgr, { Stages } from \"./StageMgr\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class StageLobby extends Stage {\r\n  @property(QRCodeGen) qrCode: QRCodeGen = null;\r\n  @property(cc.Button) btnNext: cc.Button = null;\r\n  @property(cc.Label) lblRoomCode: cc.Label = null;\r\n  @property(cc.Node) players: cc.Node[] = [];\r\n  @property(cc.Material) normalSpine: cc.Material = null;\r\n  @property(cc.Material) graySpine: cc.Material = null;\r\n  @property(cc.Label) msg: cc.RichText = null;\r\n\r\n  static Instance: StageLobby = null;\r\n\r\n  // LIFE-CYCLE CALLBACKS:\r\n\r\n  onLoad() {\r\n    StageLobby.Instance = this;\r\n  }\r\n\r\n  start() {\r\n    this.msg.string = `${window.controllerOrigin}`;\r\n  }\r\n\r\n  onEnable() {\r\n    return;\r\n    for (let i = 0; i < 3; i++) {\r\n      this.setUI(PeerManager.Instance.clientConnected[i] ? true : false, i);\r\n    }\r\n  }\r\n\r\n  // update (dt) {}\r\n\r\n  nextStage() {\r\n    SoundMgr.playSfx(SoundMgr.Instance.SFX_BUTTON);\r\n    cc.tween(this.btnNext.node)\r\n      .to(0.1, { scale: 0.65 })\r\n      .to(0.1, { scale: 0.5 })\r\n      .call(() => {\r\n        StageMgr.show(Stages.StageInGame);\r\n      })\r\n      .start();\r\n  }\r\n\r\n  setUI(isConnected: boolean, index: number) {\r\n    this.players[index].getChildByName(\"playerReady\").active = isConnected;\r\n    this.players[index].getChildByName(\"playerNotReady\").active = !isConnected;\r\n    this.players[index]\r\n      .getChildByName(\"playerSprite\")\r\n      .getComponent(sp.Skeleton)\r\n      .setMaterial(0, isConnected ? this.normalSpine : this.graySpine);\r\n  }\r\n}\r\n"]}