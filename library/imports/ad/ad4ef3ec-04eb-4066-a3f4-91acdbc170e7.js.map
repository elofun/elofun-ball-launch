{"version":3,"sources":["assets\\Scripts\\gameplay\\Ball.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport GameManager from \"./GameManager\";\r\nimport ParticleManager from \"./Particle/ParticleManager\";\r\nimport TrajectoryLine from \"./TrajectoryLine/TrajectoryLine\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Ball extends cc.Component {\r\n  public static Instance: Ball = null;\r\n  public rigidBody: cc.RigidBody = null;\r\n  public trajectoryLineDir: cc.Vec2 = new cc.Vec2(0, 1);\r\n  @property(cc.Node) public SFX: cc.Node = null;\r\n\r\n  @property(cc.Node) public ball: cc.Node = null;\r\n  @property(TrajectoryLine) public trajectoryLine: TrajectoryLine = null;\r\n\r\n  @property(Number) public moveSpeed: number = 0;\r\n  public isBallMoving: boolean = false;\r\n  public mouseHold: boolean = false;\r\n\r\n  protected onEnable(): void {\r\n    Ball.Instance = this;\r\n    this.rigidBody = this.ball.getComponent(cc.RigidBody);\r\n    this.rigidBody.gravityScale = 0;\r\n\r\n    // this.node.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyPress, this);\r\n    cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyPress, this);\r\n    cc.systemEvent.on(\r\n      cc.SystemEvent.EventType.KEY_DOWN,\r\n      this.onKeyPressEnter,\r\n      this\r\n    );\r\n  }\r\n  protected start(): void {\r\n    this.trajectoryLine.drawCircle(\r\n      this.ball.getPosition(),\r\n      this.trajectoryLineDir,\r\n      100\r\n    );\r\n  }\r\n  SetDirOfBall(trajectoryLineDir: cc.Vec2) {\r\n    let dir: cc.Vec2 = trajectoryLineDir\r\n      .sub(this.ball.getPosition())\r\n      .normalize()\r\n      .mul(this.moveSpeed);\r\n\r\n    this.rigidBody.linearVelocity = dir;\r\n  }\r\n  onKeyPress(event: cc.Event.EventKeyboard) {\r\n    if (this.node.active == false) return;\r\n\r\n    switch (event.keyCode) {\r\n      case cc.macro.KEY.d: //keycode right arrow\r\n        if (this.isBallMoving == true) return;\r\n\r\n        this.RotateTrajectoryLine(1);\r\n        break;\r\n      case 39: //keycode left arrow\r\n        if (this.isBallMoving == true) return;\r\n\r\n        this.RotateTrajectoryLine(-1);\r\n        break;\r\n    }\r\n  }\r\n  onKeyPressEnter(event: cc.Event.EventKeyboard) {\r\n    if (this.node.active == false) return;\r\n    switch (event.keyCode) {\r\n      case 13: //enter keyCode\r\n        if (this.isBallMoving == true) return;\r\n\r\n        this.SetDirOfBall(this.trajectoryLineDir);\r\n        this.trajectoryLine.graphics.clear();\r\n        this.isBallMoving = true;\r\n        break;\r\n    }\r\n  }\r\n  RotateTrajectoryLine(dir: number) {\r\n    this.trajectoryLineDir = this.trajectoryLineDir.rotate(0.017453 * 2 * dir);\r\n    this.trajectoryLine.graphics.clear();\r\n\r\n    this.trajectoryLine.drawCircle(\r\n      this.ball.getPosition(),\r\n      this.trajectoryLineDir,\r\n      100\r\n    );\r\n  }\r\n  Reset() {\r\n    this.rigidBody.linearVelocity = cc.Vec2.ZERO;\r\n    this.isBallMoving = false;\r\n    this.trajectoryLineDir = new cc.Vec2(0, 1);\r\n    this.ball.setPosition(0, 0);\r\n  }\r\n  protected update(dt: number): void {}\r\n}\r\n"]}